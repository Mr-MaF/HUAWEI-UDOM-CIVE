<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrator Dashboard - HUAWEI-UDOM Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js" rel="preload" as="script">
    <style>
         :root {
            --huawei-red: #e62928;
            --huawei-dark-red: #c41e1d;
            --huawei-blue: #1f69aa;
            --huawei-light-blue: #4e93d3;
            --huawei-gold: #ffd700;
        }
        
        .dark {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --border-color: #333333;
            --shadow-color: rgba(255, 255, 255, 0.1);
        }
        
         :root:not(.dark) {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #e2e8f0;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --border-color: #e2e8f0;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
        }
        /* Enhanced Security Indicators */
        
        .security-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 9999;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .security-indicator.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        
        .security-indicator.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }
        /* Enhanced Sidebar */
        
        .sidebar {
            background: linear-gradient(180deg, var(--bg-secondary), var(--bg-tertiary));
            border-right: 1px solid var(--border-color);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            width: 300px;
            box-shadow: 4px 0 20px var(--shadow-color);
            backdrop-filter: blur(10px);
        }
        
        .sidebar.collapsed {
            width: 80px;
        }
        
        .sidebar.mobile-hidden {
            transform: translateX(-100%);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 40;
        }
        
        .sidebar-overlay.show {
            display: block;
        }
        /* Enhanced Navigation */
        
        .nav-item {
            border-radius: 16px;
            margin-bottom: 4px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            padding: 12px 16px;
        }
        
        .nav-item:hover {
            background: linear-gradient(135deg, rgba(31, 105, 170, 0.1), rgba(230, 41, 40, 0.1));
            transform: translateX(8px) scale(1.02);
            box-shadow: 0 4px 12px var(--shadow-color);
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, rgba(230, 41, 40, 0.2), rgba(31, 105, 170, 0.2));
            color: var(--huawei-red);
            border-left: 4px solid var(--huawei-red);
            box-shadow: 0 8px 25px rgba(230, 41, 40, 0.3);
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 60%;
            background: linear-gradient(180deg, var(--huawei-red), var(--huawei-blue));
            border-radius: 2px 0 0 2px;
        }
        /* Enhanced Main Content */
        
        .main-content {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-left: 300px;
            min-height: 100vh;
        }
        
        .main-content.sidebar-collapsed {
            margin-left: 80px;
        }
        /* Enhanced Cards */
        
        .card {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-primary));
            border: 1px solid var(--border-color);
            border-radius: 20px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px var(--shadow-color);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--huawei-red), var(--huawei-blue), var(--huawei-gold));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .card:hover::before {
            opacity: 1;
        }
        
        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px var(--shadow-color);
        }
        /* Enhanced Buttons */
        
        .btn-primary {
            background: linear-gradient(135deg, var(--huawei-red), var(--huawei-dark-red));
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0.875rem 1.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--huawei-dark-red), var(--huawei-red));
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(230, 41, 40, 0.4);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--huawei-blue);
            border: 2px solid var(--huawei-blue);
            border-radius: 12px;
            padding: 0.875rem 1.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }
        
        .btn-secondary:hover {
            background: var(--huawei-blue);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(31, 105, 170, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0.875rem 1.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626, #ef4444);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }
        /* Enhanced Stats Cards */
        
        .stats-card {
            background: linear-gradient(145deg, var(--bg-secondary), var(--bg-primary));
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .stats-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transform: rotate(45deg);
            transition: transform 0.6s ease;
        }
        
        .stats-card:hover::before {
            transform: rotate(45deg) translate(50%, 50%);
        }
        
        .stats-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px var(--shadow-color);
        }
        /* Enhanced Input Fields */
        
        .input-field {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
            padding: 1rem;
            font-size: 1rem;
            width: 100%;
        }
        
        .input-field:focus {
            border-color: var(--huawei-blue);
            box-shadow: 0 0 0 4px rgba(31, 105, 170, 0.1);
            outline: none;
            background: var(--bg-primary);
        }
        /* Enhanced Toast Notifications */
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1.25rem 1.75rem;
            border-radius: 16px;
            color: white;
            font-weight: 600;
            z-index: 9999;
            transform: translateX(120%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            min-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast-success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .toast-error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .toast-info {
            background: linear-gradient(135deg, var(--huawei-blue), var(--huawei-light-blue));
        }
        
        .toast-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        /* Loading States */
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--huawei-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        /* Enhanced Responsive Design */
        
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                z-index: 50;
                width: 300px;
            }
            .main-content {
                margin-left: 0;
            }
            .main-content.sidebar-collapsed {
                margin-left: 0;
            }
        }
        /* Professional Animation Classes */
        
        .fade-in {
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .slide-up {
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }
            to {
                transform: translateY(0);
            }
        }
        /* Professional Status Indicators */
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }
        
        .status-online {
            background-color: #10b981;
        }
        
        .status-warning {
            background-color: #f59e0b;
        }
        
        .status-error {
            background-color: #ef4444;
        }
        
        .status-offline {
            background-color: #6b7280;
        }
        
        @keyframes pulse {
            0%,
            100% {
                opacity: 1;
            }
            50% {
                opacity: 0.6;
            }
        }
        /* Enhanced Security Visual Elements */
        
        .security-badge {
            background: linear-gradient(135deg, var(--huawei-gold), #fbbf24);
            color: #92400e;
            padding: 0.375rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
        }
        
        .audit-trail {
            background: linear-gradient(145deg, var(--bg-tertiary), var(--bg-secondary));
            border-left: 4px solid var(--huawei-blue);
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 0 12px 12px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }
    </style>
</head>

<body>
    <!-- Security Indicator -->
    <div class="security-indicator" id="securityIndicator">
        <i class="fas fa-shield-alt"></i>
        <span id="securityStatus">Secure Session</span>
    </div>

    <!-- Sidebar -->
    <div class="sidebar fixed top-0 left-0 h-full z-40" id="sidebar">
        <div class="flex flex-col h-full">
            <!-- Enhanced Logo -->
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-gradient-to-br from-red-500 via-blue-600 to-yellow-500 rounded-xl flex items-center justify-center text-white font-bold mr-3 shadow-lg">
                            <i class="fas fa-university text-lg"></i>
                        </div>
                        <div class="nav-text">
                            <div class="text-lg font-bold whitespace-nowrap">UDOM Portal</div>
                            <div class="text-xs text-gray-500">Administrator Panel</div>
                        </div>
                    </div>
                    <button class="md:hidden text-gray-500 hover:text-gray-700" id="closeSidebar">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Enhanced User Info -->
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white font-bold mr-3 shadow-lg">
                        <span id="userInitials">--</span>
                    </div>
                    <div class="nav-text">
                        <div class="font-bold text-sm" id="userName">Loading...</div>
                        <div class="text-xs text-gray-500" id="userRole">Administrator</div>
                        <div class="text-xs text-green-600" id="userStatus">
                            <i class="fas fa-circle mr-1"></i>Active
                        </div>
                    </div>
                </div>

                <div class="security-badge mb-3">
                    <i class="fas fa-crown mr-1"></i>
                    <span class="nav-text">Super Admin</span>
                </div>

                <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-3 rounded-xl nav-text">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs font-medium">Session Active</span>
                        <i class="fas fa-shield-alt text-sm"></i>
                    </div>
                    <div class="text-lg font-bold" id="sessionTimer">--:--</div>
                    <div class="text-xs opacity-80">Auto-logout in <span id="sessionRemaining">--</span></div>
                </div>
            </div>

            <!-- Enhanced Navigation -->
            <nav class="flex-1 p-4 overflow-y-auto">
                <div class="mb-4 text-xs font-bold text-gray-500 uppercase tracking-wider nav-text">Dashboard</div>
                <ul class="space-y-2">
                    <li>
                        <div class="nav-item active flex items-center clickable" data-section="dashboard">
                            <i class="fas fa-tachometer-alt w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Overview</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="analytics">
                            <i class="fas fa-chart-pie w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Analytics</span>
                        </div>
                    </li>
                </ul>

                <div class="my-6 text-xs font-bold text-gray-500 uppercase tracking-wider nav-text">User Management</div>
                <ul class="space-y-2">
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="users">
                            <i class="fas fa-users w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">User Accounts</span>
                            <span class="nav-badge ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full nav-text">5</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="roles">
                            <i class="fas fa-user-shield w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Roles & Permissions</span>
                        </div>
                    </li>
                </ul>

                <div class="my-6 text-xs font-bold text-gray-500 uppercase tracking-wider nav-text">Academic</div>
                <ul class="space-y-2">
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="courses">
                            <i class="fas fa-graduation-cap w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Course Management</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="departments">
                            <i class="fas fa-building w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Departments</span>
                        </div>
                    </li>
                </ul>

                <div class="my-6 text-xs font-bold text-gray-500 uppercase tracking-wider nav-text">Examination System</div>
                <ul class="space-y-2">
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="exam-system">
                            <i class="fas fa-clipboard-check w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Exam Console</span>
                            <span class="nav-badge ml-auto bg-purple-500 text-white text-xs px-2 py-1 rounded-full nav-text animate-pulse">Live</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="proctoring">
                            <i class="fas fa-eye w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">AI Proctoring</span>
                            <span class="nav-badge ml-auto bg-green-500 text-white text-xs px-2 py-1 rounded-full nav-text">12</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="exam-reports">
                            <i class="fas fa-chart-line w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Exam Analytics</span>
                        </div>
                    </li>
                </ul>

                <div class="my-6 text-xs font-bold text-gray-500 uppercase tracking-wider nav-text">System Administration</div>
                <ul class="space-y-2">
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="security">
                            <i class="fas fa-shield-alt w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Security Center</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="audit">
                            <i class="fas fa-history w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Audit Trails</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="system-health">
                            <i class="fas fa-heartbeat w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">System Health</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="backup">
                            <i class="fas fa-database w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">Backup & Recovery</span>
                        </div>
                    </li>
                    <li>
                        <div class="nav-item flex items-center clickable" data-section="settings">
                            <i class="fas fa-cog w-6 h-6 mr-3 flex-shrink-0 text-lg"></i>
                            <span class="nav-text font-medium">System Settings</span>
                        </div>
                    </li>
                </ul>
            </nav>

            <!-- Enhanced Logout -->
            <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                <button class="w-full flex items-center justify-center px-4 py-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900 rounded-xl transition-all font-medium" id="logoutBtn">
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    <span class="nav-text">Secure Logout</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Enhanced Top Header -->
        <header class="bg-white dark:bg-gray-900 shadow-lg border-b border-gray-200 dark:border-gray-700 sticky top-0 z-30 backdrop-filter backdrop-blur-lg">
            <div class="flex items-center justify-between p-6">
                <div class="flex items-center">
                    <button class="md:hidden mr-4 p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all" id="openSidebar">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <button class="hidden md:block mr-4 p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all" id="toggleSidebar">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <div>
                        <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-red-600 bg-clip-text text-transparent">
                            Administrator Dashboard
                        </h1>
                        <p class="text-sm text-gray-500 font-medium">Comprehensive system management and oversight</p>
                    </div>
                </div>

                <div class="flex items-center space-x-4">
                    <!-- System Status Indicator -->
                    <div class="hidden sm:flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900 dark:to-emerald-900 rounded-full border border-green-200 dark:border-green-800">
                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                        <span class="text-sm font-semibold text-green-700 dark:text-green-300">All Systems Operational</span>
                    </div>

                    <!-- Quick Actions -->
                    <button class="p-3 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl relative transition-all" id="notificationBtn">
                        <i class="fas fa-bell text-lg"></i>
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full min-w-[20px] h-5 flex items-center justify-center">3</span>
                    </button>

                    <button class="p-3 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all" id="darkModeToggle">
                        <i class="fas fa-moon text-lg" id="darkModeIcon"></i>
                    </button>

                    <button class="p-3 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all" title="Emergency Alert">
                        <i class="fas fa-exclamation-triangle text-lg"></i>
                    </button>

                    <a href="index.html" class="p-3 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all" title="Portal Home">
                        <i class="fas fa-home text-lg"></i>
                    </a>
                </div>
            </div>
        </header>

        <!-- Enhanced Dashboard Content -->
        <main class="p-8">
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="section fade-in">
                <!-- Enhanced System Overview -->
                <div class="bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 text-white rounded-3xl p-8 mb-8 relative overflow-hidden shadow-2xl">
                    <div class="absolute inset-0 bg-black opacity-20"></div>
                    <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-white to-transparent opacity-10 rounded-full -mr-32 -mt-32"></div>
                    <div class="relative z-10">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="flex items-center mb-4">
                                    <i class="fas fa-university text-4xl mr-4"></i>
                                    <div>
                                        <h2 class="text-4xl font-bold mb-2">HUAWEI-UDOM Portal</h2>
                                        <p class="text-blue-100 text-lg font-medium">Digital Learning & Examination Platform</p>
                                    </div>
                                </div>
                                <div class="mt-6 grid grid-cols-2 lg:grid-cols-4 gap-6">
                                    <div class="text-center bg-white bg-opacity-10 rounded-xl p-4">
                                        <div class="text-3xl font-bold mb-1" id="systemUptime">99.9%</div>
                                        <div class="text-sm text-blue-100">System Uptime</div>
                                    </div>
                                    <div class="text-center bg-white bg-opacity-10 rounded-xl p-4">
                                        <div class="text-3xl font-bold mb-1" id="totalUsers">--</div>
                                        <div class="text-sm text-blue-100">Active Users</div>
                                    </div>
                                    <div class="text-center bg-white bg-opacity-10 rounded-xl p-4">
                                        <div class="text-3xl font-bold mb-1" id="totalCourses">--</div>
                                        <div class="text-sm text-blue-100">Total Courses</div>
                                    </div>
                                    <div class="text-center bg-white bg-opacity-10 rounded-xl p-4">
                                        <div class="text-3xl font-bold mb-1" id="activeExams">--</div>
                                        <div class="text-sm text-blue-100">Live Exams</div>
                                    </div>
                                </div>
                            </div>
                            <div class="hidden lg:block">
                                <div class="w-40 h-40 relative">
                                    <svg class="w-40 h-40 transform -rotate-90" viewBox="0 0 120 120">
                                        <circle cx="60" cy="60" r="54" fill="transparent" stroke="rgba(255,255,255,0.2)" stroke-width="8"/>
                                        <circle cx="60" cy="60" r="54" fill="transparent" stroke="white" stroke-width="8" 
                                                stroke-dasharray="339.29" stroke-dashoffset="33.93" stroke-linecap="round"/>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="text-center">
                                            <div class="text-3xl font-bold" id="healthScore">90%</div>
                                            <div class="text-xs">Health Score</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Key Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
                    <div class="stats-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-users text-2xl text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-4xl font-bold text-blue-600 mb-1" id="activeUsersCount">--</div>
                                <div class="text-sm font-medium text-gray-500">Active Users</div>
                            </div>
                        </div>
                        <div class="flex items-center text-xs">
                            <i class="fas fa-arrow-up text-green-500 mr-2"></i>
                            <span class="text-green-600 font-semibold">+12% from last month</span>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-graduation-cap text-2xl text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-4xl font-bold text-green-600 mb-1" id="activeCoursesCount">--</div>
                                <div class="text-sm font-medium text-gray-500">Active Courses</div>
                            </div>
                        </div>
                        <div class="flex items-center text-xs">
                            <i class="fas fa-arrow-up text-green-500 mr-2"></i>
                            <span class="text-green-600 font-semibold">+8% increase</span>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-clipboard-check text-2xl text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-4xl font-bold text-purple-600 mb-1" id="totalExamsCount">--</div>
                                <div class="text-sm font-medium text-gray-500">Total Exams</div>
                            </div>
                        </div>
                        <div class="flex items-center text-xs">
                            <i class="fas fa-robot text-purple-500 mr-2"></i>
                            <span class="text-purple-600 font-semibold">AI Proctored</span>
                        </div>
                    </div>

                    <div class="stats-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl flex items-center justify-center shadow-lg">
                                <i class="fas fa-shield-alt text-2xl text-white"></i>
                            </div>
                            <div class="text-right">
                                <div class="text-4xl font-bold text-orange-600 mb-1" id="securityScore">98.5%</div>
                                <div class="text-sm font-medium text-gray-500">Security Score</div>
                            </div>
                        </div>
                        <div class="flex items-center text-xs">
                            <i class="fas fa-check text-green-500 mr-2"></i>
                            <span class="text-green-600 font-semibold">All systems secure</span>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Quick Access Panel -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Advanced Exam System Access -->
                    <div class="card p-8 border-2 border-purple-200 dark:border-purple-800 bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-purple-900 dark:via-blue-900 dark:to-indigo-900">
                        <div class="flex items-center justify-between mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-purple-500 via-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center shadow-xl">
                                <i class="fas fa-clipboard-check text-3xl text-white"></i>
                            </div>
                            <div class="bg-gradient-to-r from-purple-500 to-pink-600 text-white px-4 py-2 rounded-full text-sm font-bold animate-pulse">
                                LIVE SYSTEM
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold mb-3 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
                            Advanced Exam System
                        </h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">
                            AI-powered examination platform with blockchain verification, real-time proctoring, and comprehensive analytics dashboard.
                        </p>
                        <div class="grid grid-cols-2 gap-4 mb-6 text-sm">
                            <div class="text-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow">
                                <div class="text-3xl font-bold text-purple-600 mb-1" id="liveExamsCount">--</div>
                                <div class="text-gray-500">Live Exams</div>
                            </div>
                            <div class="text-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow">
                                <div class="text-3xl font-bold text-blue-600 mb-1" id="examStudentsCount">--</div>
                                <div class="text-gray-500">Students Online</div>
                            </div>
                        </div>
                        <button class="w-full btn-primary text-lg py-4" id="accessExamSystemBtn">
                            <i class="fas fa-rocket mr-3"></i>Access Exam Console
                        </button>
                    </div>

                    <!-- System Management Hub -->
                    <div class="card p-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg mr-4">
                                <i class="fas fa-cogs text-2xl text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold">System Management</h3>
                                <p class="text-sm text-gray-500">Administrative controls</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <button class="w-full btn-primary flex items-center justify-center py-4 text-sm font-medium" data-action="add-user">
                                <i class="fas fa-user-plus mr-3"></i>Add New User Account
                            </button>
                            <button class="w-full btn-primary flex items-center justify-center py-4 text-sm font-medium" data-action="create-course">
                                <i class="fas fa-plus-circle mr-3"></i>Create New Course
                            </button>
                            <button class="w-full btn-primary flex items-center justify-center py-4 text-sm font-medium" data-action="system-backup">
                                <i class="fas fa-download mr-3"></i>Generate System Backup
                            </button>
                            <button class="w-full btn-secondary flex items-center justify-center py-4 text-sm font-medium" data-action="broadcast-message">
                                <i class="fas fa-broadcast-tower mr-3"></i>Broadcast Message
                            </button>
                        </div>
                    </div>

                    <!-- Enhanced System Status -->
                    <div class="card p-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg mr-4">
                                <i class="fas fa-server text-2xl text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold">System Status</h3>
                                <p class="text-sm text-gray-500">Real-time monitoring</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 rounded-xl border border-green-200 dark:border-green-800">
                                <div class="flex items-center">
                                    <span class="status-indicator status-online"></span>
                                    <div>
                                        <div class="font-semibold text-sm">Web Services</div>
                                        <div class="text-xs text-gray-500">Load: 45%</div>
                                    </div>
                                </div>
                                <div class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold">ONLINE</div>
                            </div>

                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 rounded-xl border border-green-200 dark:border-green-800">
                                <div class="flex items-center">
                                    <span class="status-indicator status-online"></span>
                                    <div>
                                        <div class="font-semibold text-sm">Database Cluster</div>
                                        <div class="text-xs text-gray-500">Response:
                                            <2ms</div>
                                        </div>
                                    </div>
                                    <div class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold">OPTIMAL</div>
                                </div>

                                <div class="flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 rounded-xl border border-green-200 dark:border-green-800">
                                    <div class="flex items-center">
                                        <span class="status-indicator status-online"></span>
                                        <div>
                                            <div class="font-semibold text-sm">AI Proctoring</div>
                                            <div class="text-xs text-gray-500">Accuracy: 98.7%</div>
                                        </div>
                                    </div>
                                    <div class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold">ACTIVE</div>
                                </div>

                                <div class="flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900 rounded-xl border border-blue-200 dark:border-blue-800">
                                    <div class="flex items-center">
                                        <span class="status-indicator status-online"></span>
                                        <div>
                                            <div class="font-semibold text-sm">Blockchain Network</div>
                                            <div class="text-xs text-gray-500">Nodes: 24/24</div>
                                        </div>
                                    </div>
                                    <div class="bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-bold">SYNCED</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- User Management Section (placeholder) -->
                <div id="users-section" class="section hidden">
                    <div class="card p-8">
                        <h2 class="text-3xl font-bold mb-2">User Management</h2>
                        <p class="text-gray-600 dark:text-gray-400 mb-8">Comprehensive user account administration</p>
                        <div class="text-center py-12">
                            <i class="fas fa-users text-6xl text-gray-400 mb-4"></i>
                            <p class="text-gray-500 text-lg">User management interface will be loaded here</p>
                        </div>
                    </div>
                </div>

                <!-- Other sections (placeholders) -->
                <div id="analytics-section" class="section hidden">
                    <div class="card p-8">
                        <h2 class="text-3xl font-bold mb-2">System Analytics</h2>
                        <p class="text-gray-600 dark:text-gray-400 mb-8">Comprehensive system performance analytics</p>
                        <div class="text-center py-12">
                            <i class="fas fa-chart-pie text-6xl text-gray-400 mb-4"></i>
                            <p class="text-gray-500 text-lg">Analytics dashboard will be loaded here</p>
                        </div>
                    </div>
                </div>

                <!-- Additional sections would be added here -->
        </main>
        </div>

        <script>
            // Enhanced Professional Administrator Dashboard
            class AdminDashboard {
                constructor() {
                    this.currentUser = null;
                    this.sessionTimeout = 3600; // 1 hour in seconds
                    this.sessionStartTime = Date.now();
                    this.systemData = {
                        users: [],
                        courses: [],
                        exams: [],
                        systemHealth: {
                            uptime: 99.9,
                            activeUsers: 0,
                            activeCourses: 0,
                            activeExams: 0,
                            securityScore: 98.5
                        }
                    };
                }

                async initialize() {
                    console.log('ðŸš€ Initializing Professional Administrator Dashboard...');

                    // Initialize components in correct order
                    await this.validateAuthentication();
                    this.initializeDarkMode();
                    this.initializeSidebar();
                    this.initializeSessionManagement();
                    this.initializeEventListeners();
                    this.loadSystemData();
                    this.startRealTimeMonitoring();

                    this.showSecureToast('Administrator dashboard initialized successfully', 'success');
                }

                async validateAuthentication() {
                    try {
                        // For demo purposes, create a default admin session
                        const defaultAdmin = {
                            id: 'admin001',
                            name: 'System Administrator',
                            email: 'admin@udom.ac.tz',
                            role: 'administrator'
                        };

                        localStorage.setItem('isAuthenticated', 'true');
                        localStorage.setItem('currentUser', JSON.stringify(defaultAdmin));
                        localStorage.setItem('sessionToken', 'admin_' + Date.now());
                        localStorage.setItem('loginTimestamp', Date.now().toString());

                        this.currentUser = defaultAdmin;
                        this.updateUserInterface();
                        this.updateSecurityIndicator('secure');

                        return {
                            success: true
                        };

                    } catch (error) {
                        console.error('âŒ Authentication validation error:', error);
                        this.handleAuthenticationFailure('Authentication validation failed');
                        return {
                            success: false
                        };
                    }
                }

                handleAuthenticationFailure(reason) {
                    console.error('âŒ Authentication Failed:', reason);
                    this.updateSecurityIndicator('error', 'Authentication Required');

                    this.showSecurityModal(
                        'Authentication Required',
                        `Access denied: ${reason}. Please log in through the official portal.`,
                        () => {
                            window.location.href = 'login.html';
                        }
                    );
                }

                updateUserInterface() {
                    if (!this.currentUser) return;

                    const userName = document.getElementById('userName');
                    const userRole = document.getElementById('userRole');
                    const userInitials = document.getElementById('userInitials');

                    if (userName) userName.textContent = this.currentUser.name || 'Administrator';
                    if (userRole) userRole.textContent = this.currentUser.role || 'Administrator';

                    if (userInitials && this.currentUser.name) {
                        const initials = this.currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                        userInitials.textContent = initials;
                    }
                }

                initializeSessionManagement() {
                    const updateTimer = () => {
                        const elapsed = Math.floor((Date.now() - this.sessionStartTime) / 1000);
                        const remaining = this.sessionTimeout - elapsed;

                        if (remaining <= 0) {
                            this.handleSessionExpiry();
                            return;
                        }

                        const minutes = Math.floor(remaining / 60);
                        const seconds = remaining % 60;

                        const sessionTimer = document.getElementById('sessionTimer');
                        const sessionRemaining = document.getElementById('sessionRemaining');

                        if (sessionTimer) {
                            sessionTimer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                        }

                        if (sessionRemaining) {
                            sessionRemaining.textContent = `${minutes}m ${seconds}s`;
                        }
                    };

                    updateTimer();
                    setInterval(updateTimer, 1000);
                }

                // FIXED: Enhanced Event Listeners with proper binding
                initializeEventListeners() {
                    console.log('ðŸ”— Initializing event listeners...');

                    // Use event delegation for better performance
                    document.addEventListener('click', (e) => {
                        this.handleGlobalClick(e);
                    });

                    // Specific sidebar controls
                    this.bindSidebarControls();

                    // Navigation items
                    this.bindNavigationControls();

                    // Action buttons
                    this.bindActionButtons();

                    // Security controls
                    this.bindSecurityControls();
                }

                handleGlobalClick(e) {
                    const target = e.target;

                    // Handle navigation items
                    if (target.closest('.nav-item[data-section]')) {
                        e.preventDefault();
                        const navItem = target.closest('.nav-item[data-section]');
                        const section = navItem.dataset.section;
                        if (section) {
                            this.showSection(section);
                            this.setActiveNavItem(navItem);
                        }
                        return;
                    }

                    // Handle clickable elements with data-action
                    if (target.closest('[data-action]')) {
                        const button = target.closest('[data-action]');
                        const action = button.dataset.action;
                        this.handleQuickAction(action);
                        return;
                    }

                    // Handle buttons with specific IDs
                    if (target.closest('#accessExamSystemBtn')) {
                        this.accessExamSystem();
                        return;
                    }
                }

                bindSidebarControls() {
                    const openSidebar = document.getElementById('openSidebar');
                    const closeSidebar = document.getElementById('closeSidebar');
                    const toggleSidebar = document.getElementById('toggleSidebar');
                    const sidebarOverlay = document.getElementById('sidebarOverlay');

                    if (openSidebar) {
                        openSidebar.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.toggleMobileSidebar();
                        });
                    }

                    if (closeSidebar) {
                        closeSidebar.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.toggleMobileSidebar();
                        });
                    }

                    if (toggleSidebar) {
                        toggleSidebar.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.toggleDesktopSidebar();
                        });
                    }

                    if (sidebarOverlay) {
                        sidebarOverlay.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.toggleMobileSidebar();
                        });
                    }
                }

                bindNavigationControls() {
                    // Additional direct binding for navigation items
                    document.querySelectorAll('.nav-item[data-section]').forEach(item => {
                        item.addEventListener('click', (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            const section = item.dataset.section;
                            if (section) {
                                this.showSection(section);
                                this.setActiveNavItem(item);
                            }
                        });
                    });
                }

                bindActionButtons() {
                    // Direct binding for critical action buttons
                    const examSystemBtn = document.getElementById('accessExamSystemBtn');
                    if (examSystemBtn) {
                        examSystemBtn.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.accessExamSystem();
                        });
                    }

                    // Quick action buttons
                    document.querySelectorAll('[data-action]').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.preventDefault();
                            const action = btn.dataset.action;
                            this.handleQuickAction(action);
                        });
                    });
                }

                bindSecurityControls() {
                    const logoutBtn = document.getElementById('logoutBtn');
                    if (logoutBtn) {
                        logoutBtn.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.initiateSecureLogout();
                        });
                    }

                    const darkModeToggle = document.getElementById('darkModeToggle');
                    if (darkModeToggle) {
                        darkModeToggle.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.toggleDarkMode();
                        });
                    }

                    const notificationBtn = document.getElementById('notificationBtn');
                    if (notificationBtn) {
                        notificationBtn.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.showNotificationCenter();
                        });
                    }
                }

                showSection(sectionName) {
                    console.log('ðŸ“„ Switching to section:', sectionName);

                    // Hide all sections
                    document.querySelectorAll('.section').forEach(section => {
                        section.classList.add('hidden');
                        section.classList.remove('fade-in');
                    });

                    // Show target section
                    const targetSection = document.getElementById(`${sectionName}-section`);
                    if (targetSection) {
                        setTimeout(() => {
                            targetSection.classList.remove('hidden');
                            targetSection.classList.add('fade-in');
                        }, 50);

                        this.showSecureToast(`Now viewing: ${this.getSectionTitle(sectionName)}`, 'info');
                    }
                }

                getSectionTitle(sectionName) {
                    const titles = {
                        'dashboard': 'Dashboard Overview',
                        'users': 'User Management',
                        'analytics': 'System Analytics',
                        'courses': 'Course Management',
                        'roles': 'Roles & Permissions',
                        'departments': 'Departments',
                        'exam-system': 'Exam System Console',
                        'proctoring': 'AI Proctoring',
                        'exam-reports': 'Exam Analytics',
                        'security': 'Security Center',
                        'audit': 'Audit Trails',
                        'system-health': 'System Health',
                        'backup': 'Backup & Recovery',
                        'settings': 'System Settings'
                    };
                    return titles[sectionName] || sectionName;
                }

                setActiveNavItem(activeItem) {
                    document.querySelectorAll('.nav-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    activeItem.classList.add('active');
                }

                accessExamSystem() {
                    console.log('ðŸŽ¯ Accessing Advanced Exam System...');
                    this.showSecureToast('Initializing secure exam system access...', 'info');

                    // Set admin privileges for exam system
                    localStorage.setItem('examSystemAccess', 'administrator');
                    localStorage.setItem('examSystemUser', JSON.stringify({
                        id: this.currentUser.id,
                        name: this.currentUser.name,
                        role: 'administrator',
                        privileges: ['full_access', 'proctoring_control', 'system_admin'],
                        accessLevel: 'superuser'
                    }));

                    // Simulate system preparation
                    setTimeout(() => {
                        this.showSecureToast('Exam system access granted', 'success');
                        window.location.href = 'exam_system.html';
                    }, 1500);
                }

                handleQuickAction(action) {
                    console.log(`âš¡ Quick action: ${action}`);

                    const actions = {
                        'add-user': () => this.showUserManagementModal(),
                        'create-course': () => this.showCourseCreationModal(),
                        'system-backup': () => this.initiateSystemBackup(),
                        'broadcast-message': () => this.showBroadcastModal()
                    };

                    if (actions[action]) {
                        actions[action]();
                    } else {
                        this.showSecureToast(`Action ${action} is not yet implemented`, 'warning');
                    }
                }

                // Rest of your methods remain the same...
                loadSystemData() {
                    this.systemData = {
                        users: [{
                            id: 1,
                            name: 'Prof. Amina Hassan',
                            email: 'amina.hassan@udom.ac.tz',
                            role: 'lecturer',
                            department: 'Computer Science',
                            status: 'active',
                            lastLogin: new Date(Date.now() - 120000)
                        }],
                        courses: [{
                            id: 1,
                            name: 'Advanced Python Programming',
                            code: 'CS401',
                            instructor: 'Prof. Amina Hassan',
                            students: 45,
                            department: 'Computer Science',
                            status: 'active'
                        }],
                        exams: [{
                            id: 1,
                            name: 'Midterm Examination - CS401',
                            course: 'Advanced Python Programming',
                            students: 45,
                            status: 'active',
                            proctoring: true
                        }]
                    };

                    this.updateDashboardMetrics();
                }

                updateDashboardMetrics() {
                    const activeUsers = this.systemData.users.filter(u => u.status === 'active').length;
                    const activeCourses = this.systemData.courses.filter(c => c.status === 'active').length;
                    const activeExams = this.systemData.exams.filter(e => e.status === 'active').length;

                    this.updateElement('totalUsers', activeUsers);
                    this.updateElement('totalCourses', activeCourses);
                    this.updateElement('activeExams', activeExams);
                    this.updateElement('activeUsersCount', activeUsers);
                    this.updateElement('activeCoursesCount', activeCourses);
                    this.updateElement('totalExamsCount', this.systemData.exams.length);
                    this.updateElement('liveExamsCount', activeExams);
                    this.updateElement('examStudentsCount', this.systemData.exams.reduce((sum, exam) => sum + (exam.students || 0), 0));
                    this.updateElement('healthScore', '95%');
                    this.updateElement('securityScore', '98.7%');
                }

                updateElement(id, value) {
                    const element = document.getElementById(id);
                    if (element) {
                        if (typeof value === 'number') {
                            this.animateNumber(element, parseInt(element.textContent) || 0, value);
                        } else {
                            element.textContent = value;
                        }
                    }
                }

                animateNumber(element, from, to) {
                    const duration = 1000;
                    const start = Date.now();
                    const update = () => {
                        const elapsed = Date.now() - start;
                        const progress = Math.min(elapsed / duration, 1);
                        const current = Math.round(from + (to - from) * progress);
                        element.textContent = current;

                        if (progress < 1) {
                            requestAnimationFrame(update);
                        }
                    };
                    update();
                }

                initiateSystemBackup() {
                    this.showSecureToast('Initiating system backup...', 'info');
                    let progress = 0;
                    const interval = setInterval(() => {
                        progress += 10;
                        if (progress <= 100) {
                            this.showSecureToast(`Backup progress: ${progress}%`, 'info');
                        } else {
                            clearInterval(interval);
                            this.showSecureToast('System backup completed successfully', 'success');
                        }
                    }, 500);
                }

                showNotificationCenter() {
                    const notifications = [{
                        id: 1,
                        type: 'security',
                        title: 'Security Scan Complete',
                        message: 'All systems passed security validation',
                        time: '2 min ago',
                        priority: 'info'
                    }];

                    this.showModal('System Notifications', this.generateNotificationHTML(notifications));
                }

                generateNotificationHTML(notifications) {
                        return `
                <div class="space-y-4 max-h-96 overflow-y-auto">
                    ${notifications.map(notification => `
                        <div class="p-4 bg-gradient-to-r from-${this.getNotificationColor(notification.priority)}-50 to-${this.getNotificationColor(notification.priority)}-100 dark:from-${this.getNotificationColor(notification.priority)}-900 dark:to-${this.getNotificationColor(notification.priority)}-800 rounded-xl border border-${this.getNotificationColor(notification.priority)}-200 dark:border-${this.getNotificationColor(notification.priority)}-700">
                            <div class="flex items-start justify-between">
                                <div>
                                    <h4 class="font-semibold text-${this.getNotificationColor(notification.priority)}-800 dark:text-${this.getNotificationColor(notification.priority)}-200">${notification.title}</h4>
                                    <p class="text-sm text-${this.getNotificationColor(notification.priority)}-600 dark:text-${this.getNotificationColor(notification.priority)}-300 mt-1">${notification.message}</p>
                                    <p class="text-xs text-${this.getNotificationColor(notification.priority)}-500 mt-2">${notification.time}</p>
                                </div>
                                <i class="fas fa-${this.getNotificationIcon(notification.type)} text-${this.getNotificationColor(notification.priority)}-500"></i>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        getNotificationColor(priority) {
            const colors = { success: 'green', warning: 'yellow', error: 'red', info: 'blue' };
            return colors[priority] || 'blue';
        }

        getNotificationIcon(type) {
            const icons = { security: 'shield-alt', system: 'cog', exam: 'clipboard-check', user: 'user' };
            return icons[type] || 'bell';
        }

        // FIXED: Single initiateSecureLogout method
        initiateSecureLogout() {
            this.showSecurityModal(
                'Confirm Secure Logout',
                'Are you sure you want to end your administrator session? All unsaved changes will be lost.',
                () => {
                    this.performSecureLogout();
                },
                'Logout'
            );
        }

        // FIXED: Single performSecureLogout method
        performSecureLogout() {
            console.log('ðŸ”’ Performing secure logout...');
            
            // Clear all session data
            localStorage.removeItem('isAuthenticated');
            localStorage.removeItem('currentUser');
            localStorage.removeItem('sessionToken');
            localStorage.removeItem('loginTimestamp');
            localStorage.removeItem('examSystemAccess');
            localStorage.removeItem('examSystemUser');

            // Update security indicator
            this.updateSecurityIndicator('error', 'Logged Out');
            
            // Show logout message and redirect
            this.showSecureToast('Secure logout completed', 'success');
            
            // Use a short timeout to ensure the toast is visible
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 1000);
        }

        // FIXED: Single showSecurityModal method
        showSecurityModal(title, message, onConfirm, confirmText = 'Confirm') {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-filter backdrop-blur-sm';
            
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden">
                    <div class="p-8 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900">
                        <div class="flex justify-between items-center">
                            <h3 class="text-2xl font-bold text-gray-900 dark:text-white">${title}</h3>
                            <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all close-modal">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-8">
                        <div class="text-center">
                            <div class="w-20 h-20 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-6">
                                <i class="fas fa-shield-alt text-3xl text-red-600"></i>
                            </div>
                            <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">${message}</p>
                        </div>
                    </div>
                    <div class="p-8 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 flex justify-end space-x-4">
                        <button class="btn-secondary px-6 py-3 cancel-btn">Cancel</button>
                        <button class="btn-danger px-6 py-3 confirm-btn">${confirmText}</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);

            // Add event listeners directly to the buttons
            const closeBtn = modal.querySelector('.close-modal');
            const cancelBtn = modal.querySelector('.cancel-btn');
            const confirmBtn = modal.querySelector('.confirm-btn');

            const closeModal = () => {
                modal.remove();
            };

            closeBtn.addEventListener('click', closeModal);
            cancelBtn.addEventListener('click', closeModal);
            
            confirmBtn.addEventListener('click', () => {
                closeModal();
                onConfirm();
            });

            // Close on backdrop click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // Close on Escape key
            const handleEscape = (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                    document.removeEventListener('keydown', handleEscape);
                }
            };
            document.addEventListener('keydown', handleEscape);

            return modal;
        }

        toggleMobileSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const isHidden = sidebar.classList.contains('mobile-hidden');

            if (isHidden) {
                sidebar.classList.remove('mobile-hidden');
                overlay.classList.add('show');
                document.body.style.overflow = 'hidden';
            } else {
                sidebar.classList.add('mobile-hidden');
                overlay.classList.remove('show');
                document.body.style.overflow = '';
            }
        }

        toggleDesktopSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('sidebar-collapsed');
        }

        initializeSidebar() {
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.add('mobile-hidden');
            }
        }

        initializeDarkMode() {
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                this.updateDarkModeIcon();
            }

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (event.matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                this.updateDarkModeIcon();
            });
        }

        toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            this.updateDarkModeIcon();
            this.showSecureToast(`${isDark ? 'Dark' : 'Light'} mode activated`, 'success');
        }

        updateDarkModeIcon() {
            const icon = document.getElementById('darkModeIcon');
            if (icon) {
                const isDark = document.documentElement.classList.contains('dark');
                icon.className = isDark ? 'fas fa-sun text-lg' : 'fas fa-moon text-lg';
            }
        }

        updateSecurityIndicator(status, message = '') {
            const indicator = document.getElementById('securityIndicator');
            const statusText = document.getElementById('securityStatus');
            
            if (!indicator || !statusText) return;

            indicator.className = 'security-indicator';
            
            switch(status) {
                case 'secure':
                    indicator.classList.add('bg-green-500');
                    statusText.textContent = message || 'Secure Session';
                    break;
                case 'warning':
                    indicator.classList.add('warning');
                    statusText.textContent = message || 'Security Warning';
                    break;
                case 'error':
                    indicator.classList.add('error');
                    statusText.textContent = message || 'Security Alert';
                    break;
            }
        }

        startRealTimeMonitoring() {
            setInterval(() => {
                this.updateSystemMetrics();
            }, 30000);
        }

        updateSystemMetrics() {
            const healthScore = Math.floor(Math.random() * 5) + 95;
            const uptime = (99.8 + Math.random() * 0.2).toFixed(1);
            
            this.updateElement('healthScore', `${healthScore}%`);
            this.updateElement('systemUptime', `${uptime}%`);
        }

        showSecureToast(message, type = 'info') {
            document.querySelectorAll('.toast').forEach(toast => toast.remove());

            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <i class="fas fa-${this.getToastIcon(type)} mr-3"></i>
                        <span>${message}</span>
                    </div>
                    <button class="ml-4 text-white hover:text-gray-200 transition-colors" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

            document.body.appendChild(toast);
            requestAnimationFrame(() => toast.classList.add('show'));

            setTimeout(() => {
                if (toast.parentElement) {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 400);
                }
            }, 5000);
        }

        getToastIcon(type) {
            const icons = {
                success: 'check-circle',
                error: 'exclamation-circle',
                warning: 'exclamation-triangle',
                info: 'info-circle'
            };
            return icons[type] || 'info-circle';
        }

        showModal(title, content, buttons = []) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-filter backdrop-blur-sm';
            
            const defaultButtons = buttons.length > 0 ? buttons : [
                { text: 'Close', action: () => modal.remove(), class: 'btn-secondary' }
            ];

            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden">
                    <div class="p-8 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900">
                        <div class="flex justify-between items-center">
                            <h3 class="text-2xl font-bold text-gray-900 dark:text-white">${title}</h3>
                            <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all" onclick="this.closest('.fixed').remove()">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-8 max-h-96 overflow-y-auto">
                        ${content}
                    </div>
                    <div class="p-8 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 flex justify-end space-x-4">
                        ${defaultButtons.map(btn => 
                            `<button class="${btn.class || 'btn-primary'} px-6 py-3" onclick="(${btn.action.toString()})(); this.closest('.fixed').remove();">${btn.text}</button>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            return modal;
        }

        showUserManagementModal() {
            const content = `
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Full Name</label>
                        <input type="text" class="input-field" placeholder="Enter full name" required>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Email Address</label>
                        <input type="email" class="input-field" placeholder="user@udom.ac.tz" required>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Role</label>
                            <select class="input-field">
                                <option>Student</option>
                                <option>Lecturer</option>
                                <option>Administrator</option>
                                <option>Subject Expert</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Department</label>
                            <select class="input-field">
                                <option>Computer Science</option>
                                <option>Mathematics</option>
                                <option>Engineering</option>
                                <option>Agriculture</option>
                            </select>
                        </div>
                    </div>
                </div>
            `;
            
            this.showModal('Add New User', content, [
                { text: 'Cancel', action: () => {}, class: 'btn-secondary' },
                { text: 'Create User', action: () => this.createUser(), class: 'btn-primary' }
            ]);
        }

        createUser() {
            this.showSecureToast('User account created successfully', 'success');
        }

        showCourseCreationModal() {
            this.showSecureToast('Course creation modal will be implemented', 'info');
        }

        showBroadcastModal() {
            this.showSecureToast('Broadcast message modal will be implemented', 'info');
        }

        handleSessionExpiry() {
            console.warn('âš ï¸ Session expired');
            this.updateSecurityIndicator('error', 'Session Expired');

            this.showSecurityModal(
                'Session Expired',
                'Your administrator session has expired for security reasons. Please log in again to continue.',
                () => {
                    this.performSecureLogout();
                }
            );
        }
    }

    // Initialize the dashboard when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
        window.adminDashboard = new AdminDashboard();
        window.adminDashboard.initialize().catch(error => {
            console.error('Failed to initialize dashboard:', error);
        });
    });

    // Global error handler
    window.addEventListener('error', (event) => {
        console.error('Global error caught:', event.error);
        if (window.adminDashboard) {
            window.adminDashboard.updateSecurityIndicator('warning', 'System Warning');
        }
    });

    console.log('ðŸŽ¯ Professional Administrator Dashboard script loaded');
        </script>
</body>

</html>
